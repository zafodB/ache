<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<style type="text/css">
    .loader {
        border: 6px solid #f3f3f3; /* Light grey */
        border-top: 6px solid #000000; /* Black */
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 25px auto auto;
        display: none;

    }

    .header {
        text-align: center;
        padding-top: 10px;
        padding-bottom: 20px;
    }

    .text-paragraph {
        text-align: center;
        padding-bottom: 10px;
        padding-top: 5px;
    }

    .form {
        text-align: center;
        padding-top: 5px;
    }


    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    .icon-link{
        right: 5px;
        bottom: 0;
        position: fixed;
    }


</style>

<script type="application/javascript">

    async function postData(url = '', feedbackText = '', feedbackName = '') {
        const response = await fetch(url, {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: 'feedbackInput=' + feedbackText + '&name=' + feedbackName
        });
        return await response;
    }

    function validateForm() {
        // alert("Hellothere");
        var loader = document.getElementById("loader");
        var feedbackInput = document.getElementById("feedbackf");
        var nameInput = document.getElementById("fname");
        var button = document.getElementById("submitb");

        var name = document.forms['feedbackForm']['fname'].value;
        var feedback = document.forms['feedbackForm']['feedbackf'].value;

        if (name === "") {
            alert('Name must be filled');

            return false
        }

        if (name.length > 1000) {
            alert('Name is too long');

            return false
        }

        if (feedback === "") {
            alert('Feedback must be filled');

            return false
        }

        if (feedback.length > 60000) {
            alert('Feedback is too long.');

            return false
        }

        loader.style.display = 'block';
        feedbackInput.disabled = true;
        nameInput.disabled = true;
        button.disabled = true;

        postData('https://app.filip.digital/api/ReceiveFeebackForm?code=XcUBCYdKc3rH1jC/WBHXTGPu78Ex54va7FWSgBSg7Pa20I1Gi/JCbQ==', feedback, name)
            .then((response) => {
                // console.log()
                if (response.status === 200) {
                    alert("Successfully submitted feedback.");

                    loader.style.display = 'none';
                    feedbackInput.disabled = false;
                    nameInput.disabled = false;
                    button.disabled = false;

                    feedbackInput.value = "";
                    nameInput.value = "";
                } else {
                    alert("Received the following error code from the server: " + response.status);
                    console.log(response);
                }

            })
            .catch((error) => {
                console.error('There has been a problem with your fetch operation: ', error)
            });
    }

</script>

<link rel="shortcut icon" type="image/png" href="https://feedbacksortstorage.blob.core.windows.net/%24web/favicon.png"/>
<html lang="en">

<head>
    <title>Submit Some Feedback!</title>
</head>

<body>
<h1 class="header">Welcome to this amazing feedback form.</h1>

<div class="text-paragraph">Please use the form below to submit your feedback.</div>

<form name='feedbackForm' class="form" onsubmit="return false">

    <label for="feedbackf">Your feedback:</label><br><br>
    <textarea name="feedbackInput" id="feedbackf" rows="10" cols="50"></textarea><br><br><br>
    <label for="fname">Your name:</label><br><br>
    <input id="fname" name="name"><br><br>

    <input id="submitb" type="submit" value="Send Feedback" onclick="validateForm()">

</form>

<div id="loader" class="loader"></div>

<!--Mandatory link to favicon source.-->
<div class="icon-link">
    <a target="_blank" href="https://icons8.com/icons/set/monitor">Monitor icon</a> icon by <a target="_blank"
                                                                                                href="https://icons8.com">Icons8</a>
</div>

</body>
</html>
